{"version":3,"sources":["../../src/hooks/useFetch.js"],"names":["useFetch","options","deps","isForceUpdate","request","forceUpdate","state","callback","newCallback","loading","Promise","resolve","promise","then","data"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;;;;;;;;;AAEe,SAASA,QAAT,CAAkBC,OAAlB,EAA4D;AAAA,MAAjCC,IAAiC,uEAA1B,EAA0B;AAAA,MAAtBC,aAAsB,uEAAN,IAAM;AACzE,MAAIC,OAAO,GAAG,qCAAoBH,OAApB,CAAd;AACA,MAAMI,WAAW,GAAG,iCAApB;;AAFyE,oBAGjD,6BAAWD,OAAX,EAAoBF,IAApB,CAHiD;AAAA;AAAA,MAGpEI,KAHoE;AAAA,MAG7DC,QAH6D;;AAIzE,MAAIC,WAAW,GAAG,wBAAY,YAAM;AAClC,QAAIF,KAAK,CAACG,OAAV,EAAmB;AACjB,aAAOC,OAAO,CAACC,OAAR,CAAgB,KAAhB,CAAP;AACD;;AACD,QAAIC,OAAO,GAAGL,QAAQ,EAAtB;AACAJ,IAAAA,aAAa,IAAIE,WAAW,EAA5B;AACA,WAAOO,OAAO,CAACC,IAAR,CAAa,UAACC,IAAD,EAAU;AAC5BX,MAAAA,aAAa,IAAIE,WAAW,EAA5B;AACA,aAAOS,IAAP;AACD,KAHM,CAAP;AAID,GAViB,EAUf,CAACR,KAAD,EAAQC,QAAR,CAVe,CAAlB;AAWA,SAAO,CAACD,KAAD,EAAQE,WAAR,CAAP;AACD","sourcesContent":["import { useCallback } from 'react';\nimport { mapRequestByOptions } from \"../utils/mapRequest\";\nimport useRequest from \"./useRequest\";\nimport useForceUpdate from \"./useForceUpdate\";\n\nexport default function useFetch(options, deps = [], isForceUpdate = true) {\n  let request = mapRequestByOptions(options);\n  const forceUpdate = useForceUpdate();\n  let [state, callback] = useRequest(request, deps);\n  let newCallback = useCallback(() => {\n    if (state.loading) {\n      return Promise.resolve(false);\n    }\n    let promise = callback();\n    isForceUpdate && forceUpdate();\n    return promise.then((data) => {\n      isForceUpdate && forceUpdate();\n      return data;\n    });\n  }, [state, callback]);\n  return [state, newCallback];\n}\n"],"file":"useFetch.js"}